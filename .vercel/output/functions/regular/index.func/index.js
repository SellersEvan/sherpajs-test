var T=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var _=Object.prototype.hasOwnProperty;var S=(r,e)=>{for(var t in e)T(r,t,{get:e[t],enumerable:!0})},H=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of A(e))!_.call(r,s)&&s!==t&&T(r,s,{get:()=>e[s],enumerable:!(o=M(e,s))||o.enumerable});return r};var B=r=>H(T({},"__esModule",{value:!0}),r);var j={};S(j,{default:()=>v});module.exports=B(j);var g;(function(r){r.GET="GET",r.PUT="PUT",r.POST="POST",r.PATCH="PATCH",r.DELETE="DELETE"})(g||(g={}));var P;(function(r){r.Vercel="Vercel",r.Local="Local"})(P||(P={}));var a;(function(r){r.JSON="JSON",r.Text="Text",r.None="None"})(a||(a={}));var R={[a.JSON]:"application/json",[a.Text]:"text/plain",[a.None]:void 0};var E={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a Teapot \u{1FAD6}",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};var J={headers:{},status:200},u=class r{static new(e){let t=r.defaultOptions(a.None,e);return{status:t.status,statusText:r.getStatusText(t.status),headers:t.headers,body:void 0,bodyType:a.None}}static text(e,t){let o=r.defaultOptions(a.Text,t);return{status:o.status,statusText:r.getStatusText(o.status),headers:o.headers,body:e,bodyType:a.Text}}static JSON(e,t){let o=r.defaultOptions(a.JSON,t);return{status:o.status,statusText:r.getStatusText(o.status),headers:o.headers,body:e,bodyType:a.JSON}}static redirect(e,t){let o=r.defaultOptions(a.None,t);return{status:302,statusText:r.getStatusText(302),headers:{Location:e,...o.headers},body:void 0,bodyType:a.None}}static defaultOptions(e,t){let o={...J,...t};return o.headers={"Content-Type":R[e],...o.headers},o}static getStatusText(e){let t=E[e];if(!t)throw new Error(`Status code "${e}" is invalid.`);return t}};var i=class{static getPathname(e){let t=this.getInstance(e).pathname;return t=t.replace(/\/\.\//g,"/"),t=t.replace(/\/[^/]+\/\.\.\//g,"/"),t}static getSearchParams(e){return this.getInstance(e).searchParams}static getInstance(e){return e=e.endsWith("/")?e.slice(0,-1):e,new URL(e,"https://example.com")}};var p=class{static getDynamicURL(e){return e.map(t=>t.isDynamic?`[${t.name}]`:t.name).join("/")}static parseHeader(e){let t={};return Object.keys(e).forEach(o=>{t[o]=e[o]}),t}static parseParamsPath(e,t){let o={};return i.getPathname(e).split("/").filter(s=>s!="").forEach((s,l)=>{if(t[l].isDynamic){let d=t[l].name,U=this.parseParam(s);this.setValue(o,d,U)}}),o}static parseParamsQuery(e){let t={};return i.getSearchParams(e).forEach((o,s)=>{this.setValue(t,s,this.parseParam(o))}),t}static setValue(e,t,o){e.hasOwnProperty(t)?Array.isArray(e[t])?e[t].push(...o):e[t]=[e[t],...o]:e[t]=o.length==1?o[0]:o}static parseParam(e){return e.includes(",")?e.split(",").map(t=>this.parseParam(t)).flat():e=="true"?[!0]:e=="false"?[!1]:/^\d+$/.test(e)?[parseInt(e)]:[e]}};var c=class{static async Local(e,t){if(!e.url||!e.method)throw new Error("Missing URL and Methods");let{body:o,bodyType:s}=await this.parseBodyLocal(e);return{url:i.getPathname(e.url),params:{path:p.parseParamsPath(e.url,t),query:p.parseParamsQuery(e.url)},method:e.method.toUpperCase(),headers:p.parseHeader(e.headers),body:o,bodyType:s}}static parseBodyLocal(e){return new Promise((t,o)=>{let s="",l=a.Text;e.on("data",d=>{s+=d.toString()}),e.on("end",()=>{let d=e.headers["content-type"];(!d||s=="")&&t({body:void 0,bodyType:a.None}),d=="application/json"&&(s=JSON.parse(s),l=a.JSON),t({body:s,bodyType:l})}),e.on("error",d=>{t({body:void 0,bodyType:a.None})})})}static async Vercel(e,t){let{body:o,bodyType:s}=await this.parseBodyVercel(e);return{url:i.getPathname(e.url),params:{path:p.parseParamsPath(e.url,t),query:p.parseParamsQuery(e.url)},method:e.method.toUpperCase(),headers:p.parseHeader(e.headers),body:o,bodyType:s}}static async parseBodyVercel(e){let t=e.headers["content-type"];return t?t=="application/json"?{body:await e.json(),bodyType:a.JSON}:{body:await e.text(),bodyType:a.Text}:{body:void 0,bodyType:a.None}}};var V=Response,m=class{static Local(e,t){t.statusCode=e.status,t.statusMessage=e.statusText;for(let[o,s]of Object.entries(e.headers))s&&t.setHeader(o,s);t.end(this.getBody(e))}static Vercel(e){return new V(this.getBody(e),{headers:e.headers,status:e.status,statusText:e.statusText})}static getBody(e){switch(e.bodyType){case a.Text:return e.body;case a.JSON:return JSON.stringify(e.body)}}};async function N(r,e,t){let o=r[t.method];if(o)try{let s=await o(t,e);return s||u.new({status:200})}catch(s){return u.text(s.message,{status:500})}else return u.new({status:405})}var y={RequestTransform:c,ResponseTransform:m,Handler:N};var x={};S(x,{DELETE:()=>k,GET:()=>F,PATCH:()=>Q,POST:()=>q,PUT:()=>G});var h=class{static server(e){return e}static module(e){return e}},f=class{static module(e){return e}};var b={JSON:"application/json",Text:"text/plain",None:void 0};var O={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a Teapot \u{1FAD6}",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};var D={headers:{},status:200},n=class r{static new(e){let t=r.defaultOptions("None",e);return{status:t.status,statusText:r.getStatusText(t.status),headers:t.headers,body:void 0,bodyType:"None"}}static text(e,t){let o=r.defaultOptions("Text",t);return{status:o.status,statusText:r.getStatusText(o.status),headers:o.headers,body:e,bodyType:"Text"}}static JSON(e,t){let o=r.defaultOptions("JSON",t);return{status:o.status,statusText:r.getStatusText(o.status),headers:o.headers,body:e,bodyType:"JSON"}}static redirect(e,t){let o=r.defaultOptions("None",t);return{status:302,statusText:r.getStatusText(302),headers:{Location:e,...o.headers},body:void 0,bodyType:"None"}}static defaultOptions(e,t){let o={...D,...t};return o.headers={"Content-Type":b[e],...o.headers},o}static getStatusText(e){let t=O[e];if(!t)throw new Error(`Status code "${e}" is invalid.`);return t}};var C={New:h,Load:f};function F(r,e){return n.JSON({request:r,context:e},{status:201})}function q(r,e){return n.JSON({request:r,context:e},{status:201})}function G(r,e){return n.JSON({request:r,context:e},{status:201})}function Q(r,e){return n.JSON({request:r,context:e},{status:201})}function k(r,e){return n.JSON({request:r,context:e},{status:201})}var w=C.New.server({context:"foo"});var X=w.context,$=[{name:"regular",isDynamic:!1}];async function v(r,e){let t=await y.RequestTransform.Vercel(r,$),o=await y.Handler(x,X,t);return y.ResponseTransform.Vercel(o)}
// Generated by SherpaJS
